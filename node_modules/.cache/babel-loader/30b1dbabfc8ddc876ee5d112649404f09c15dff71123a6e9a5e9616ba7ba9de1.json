{"ast":null,"code":"var _jsxFileName = \"/home/carlos/DEV/Projetos/trivia/sd-027-b-project-trivia-react-redux/src/pages/Login.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport validator from 'validator';\nimport { shape, func } from 'prop-types';\nimport { addUser, resetPoints } from '../redux/actions';\nimport '../styles/login.scss';\n// import logo from '../logoTrivia.svg';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass Login extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      email: '',\n      name: '',\n      isDisable: true\n    };\n    this.handleChange = _ref => {\n      let {\n        target\n      } = _ref;\n      const {\n        name,\n        value\n      } = target;\n      this.setState({\n        [name]: value\n      }, this.buttonValidation);\n    };\n    this.buttonValidation = () => {\n      const {\n        name,\n        email\n      } = this.state;\n      const nameValidation = name.length > 0;\n      const emailValidation = validator.isEmail(email);\n      this.setState({\n        isDisable: !(nameValidation && emailValidation)\n      });\n    };\n    this.fetchApi = async URL => {\n      const response = await fetch(URL);\n      const data = await response.json();\n      return data;\n    };\n    this.handleSubmit = async () => {\n      const firstURL = 'https://opentdb.com/api_token.php?command=request';\n      const data = await this.fetchApi(firstURL);\n      localStorage.setItem('token', data.token);\n      const {\n        history,\n        dispatch\n      } = this.props;\n      const {\n        name,\n        email\n      } = this.state;\n      dispatch(addUser({\n        name,\n        email\n      }));\n      history.push('/game');\n    };\n  }\n  componentDidMount() {\n    const {\n      dispatch\n    } = this.props;\n    dispatch(resetPoints());\n  }\n  render() {\n    const {\n      name,\n      email,\n      isDisable\n    } = this.state;\n    const {\n      history\n    } = this.props;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        id: \"title\",\n        children: [\"Project\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this), \"Trivia\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"input-name\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Nome:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"input-name\",\n            type: \"text\",\n            name: \"name\",\n            value: name,\n            \"data-testid\": \"input-player-name\",\n            onChange: this.handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"input-email\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Email:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"input-email\",\n            type: \"text\",\n            name: \"email\",\n            value: email,\n            \"data-testid\": \"input-gravatar-email\",\n            onChange: this.handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: this.handleSubmit,\n          \"data-testid\": \"btn-play\",\n          disabled: isDisable,\n          children: \"Play\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => history.push('/settings'),\n          \"data-testid\": \"btn-settings\",\n          children: \"Settings\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this);\n  }\n}\nLogin.propTypes = {\n  history: shape({\n    push: func\n  })\n}.isRequired;\nexport default connect()(Login);","map":{"version":3,"names":["React","Component","connect","validator","shape","func","addUser","resetPoints","Login","state","email","name","isDisable","handleChange","target","value","setState","buttonValidation","nameValidation","length","emailValidation","isEmail","fetchApi","URL","response","fetch","data","json","handleSubmit","firstURL","localStorage","setItem","token","history","dispatch","props","push","componentDidMount","render","propTypes","isRequired"],"sources":["/home/carlos/DEV/Projetos/trivia/sd-027-b-project-trivia-react-redux/src/pages/Login.js"],"sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport validator from 'validator';\nimport { shape, func } from 'prop-types';\nimport { addUser, resetPoints } from '../redux/actions';\nimport '../styles/login.scss';\n// import logo from '../logoTrivia.svg';\n\nclass Login extends Component {\n  state = {\n    email: '',\n    name: '',\n    isDisable: true,\n  };\n\n  componentDidMount() {\n    const { dispatch } = this.props;\n    dispatch(resetPoints());\n  }\n\n  handleChange = ({ target }) => {\n    const { name, value } = target;\n    this.setState({\n      [name]: value,\n    }, this.buttonValidation);\n  };\n\n  buttonValidation = () => {\n    const { name, email } = this.state;\n    const nameValidation = name.length > 0;\n    const emailValidation = validator.isEmail(email);\n    this.setState({\n      isDisable: !(nameValidation && emailValidation),\n    });\n  };\n\n  fetchApi = async (URL) => {\n    const response = await fetch(URL);\n    const data = await response.json();\n    return data;\n  };\n\n  handleSubmit = async () => {\n    const firstURL = 'https://opentdb.com/api_token.php?command=request';\n    const data = await this.fetchApi(firstURL);\n    localStorage.setItem('token', data.token);\n    const { history, dispatch } = this.props;\n    const { name, email } = this.state;\n    dispatch(addUser({ name, email }));\n    history.push('/game');\n  };\n\n  render() {\n    const {\n      name,\n      email,\n      isDisable,\n    } = this.state;\n    const {\n      history,\n    } = this.props;\n\n    return (\n      <div className=\"login\">\n        {/* <img src={ logo } alt=\"logo\" /> */}\n        <h1 id=\"title\">\n          Project\n          <br />\n          Trivia\n        </h1>\n        <form>\n\n          <label htmlFor=\"input-name\">\n            <h3>Nome:</h3>\n            <input\n              id=\"input-name\"\n              type=\"text\"\n              name=\"name\"\n              value={ name }\n              data-testid=\"input-player-name\"\n              onChange={ this.handleChange }\n            />\n          </label>\n          <label htmlFor=\"input-email\">\n            <h3>Email:</h3>\n            <input\n              id=\"input-email\"\n              type=\"text\"\n              name=\"email\"\n              value={ email }\n              data-testid=\"input-gravatar-email\"\n              onChange={ this.handleChange }\n            />\n          </label>\n          <button\n            type=\"button\"\n            onClick={ this.handleSubmit }\n            data-testid=\"btn-play\"\n            disabled={ isDisable }\n          >\n            Play\n          </button>\n          <button\n            type=\"button\"\n            onClick={ () => history.push('/settings') }\n            data-testid=\"btn-settings\"\n          >\n            Settings\n          </button>\n        </form>\n      </div>\n    );\n  }\n}\n\nLogin.propTypes = {\n  history: shape({\n    push: func,\n  }),\n}.isRequired;\n\nexport default connect()(Login);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}